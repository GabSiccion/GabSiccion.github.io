{"mappings":"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","sources":["src/js/quiz.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getDatabase, onValue, ref, push } from \"firebase/database\";\r\nimport { firebaseConfig } from \"./firebaseconfig\";\r\n\r\nfunction getSelectedCourse() {\r\n  let parameter = new URLSearchParams(window.location.search);\r\n  return parameter.get(\"course\");\r\n}\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getDatabase();\r\nconst questionsRef = ref(db, `questions/${getSelectedCourse()}`);\r\nconst scoresRef = ref(db, `scores/`);\r\n\r\n// Document Elements\r\nconst elementnumber = document.getElementById(\"number\");\r\nconst elementQuestion = document.getElementById(\"question\");\r\nconst elementAButton = document.getElementById(\"aButton\");\r\nelementAButton.addEventListener(\"click\", answerSelected);\r\nconst elementBButton = document.getElementById(\"bButton\");\r\nelementBButton.addEventListener(\"click\", answerSelected);\r\nconst elementCButton = document.getElementById(\"cButton\");\r\nelementCButton.addEventListener(\"click\", answerSelected);\r\nconst elementDButton = document.getElementById(\"dButton\");\r\nelementDButton.addEventListener(\"click\", answerSelected);\r\nconst submitButton = document.createElement(\"a\");\r\nsubmitButton.className = \"btn btn-success\";\r\nsubmitButton.addEventListener(\"click\", quizEnd);\r\nsubmitButton.href = `exploration.html?course=${getSelectedCourse()}`;\r\nsubmitButton.innerHTML = \"Submit\";\r\n\r\nlet pagetitle = document.getElementById(\"pageTitle\");\r\npagetitle.innerHTML = `${getSelectedCourse().replace(/_/g, \" \")} Quiz`;\r\nvar questions,\r\n  currentQuestionNumber = 0;\r\nvar tracks = {};\r\n\r\n$(document).ready(function () {\r\n  onValue(questionsRef, (snapshot) => {\r\n    questions = snapshot.toJSON();\r\n    buildQuiz();\r\n  });\r\n});\r\n\r\nfunction buildQuiz() {\r\n  if (Object.keys(questions).length < currentQuestionNumber + 1) {\r\n    displayScore();\r\n  } else {\r\n    const { choices, question } = questions[currentQuestionNumber];\r\n    const { a, b, c, d } = choices;\r\n\r\n    elementnumber.innerHTML = currentQuestionNumber + 1;\r\n    elementQuestion.innerHTML = question;\r\n    elementAButton.innerHTML = a;\r\n    elementBButton.innerHTML = b;\r\n    elementCButton.innerHTML = c;\r\n    elementDButton.innerHTML = d;\r\n  }\r\n}\r\n\r\nfunction answerSelected(evt) {\r\n  const { correctchoice, track } = questions[currentQuestionNumber];\r\n\r\n  if (evt.target.value === correctchoice) {\r\n    updateTrackScores(track, true);\r\n  } else {\r\n    updateTrackScores(track, false);\r\n  }\r\n\r\n  currentQuestionNumber++;\r\n  buildQuiz(currentQuestionNumber);\r\n}\r\n\r\nfunction updateTrackScores(trackName, isCorrect) {\r\n  if (isCorrect) {\r\n    tracks[trackName] = tracks[trackName] + 1 || 1;\r\n  } else {\r\n    tracks[trackName] = tracks[trackName] || 0;\r\n  }\r\n\r\n  console.log(isCorrect);\r\n  console.log(tracks);\r\n}\r\n\r\nfunction displayScore() {\r\n  let quizBox = document.getElementById(\"quiz-box\");\r\n  let infoBox = document.getElementById(\"info-box\");\r\n  let scoresBox = document.getElementById(\"scores-box\");\r\n  let infoFooter = document.getElementById(\"info-footer\");\r\n  infoFooter.append(submitButton);\r\n\r\n  let highestScoredTrack = Object.keys(tracks).reduce((a, b) =>\r\n    tracks[a] > tracks[b] ? a : b\r\n  );\r\n  let lowestScoredTrack = Object.keys(tracks).reduce((a, b) =>\r\n    tracks[a] < tracks[b] ? a : b\r\n  );\r\n  let total = Object.values(tracks).reduce(\r\n    (partialSum, a) => partialSum + a,\r\n    0\r\n  );\r\n\r\n  let totalScore = document.createElement(\"p\");\r\n  totalScore.className = \"h5\";\r\n  totalScore.innerHTML = `Your total score is ${total} out of ${\r\n    Object.keys(questions).length\r\n  }.`;\r\n  scoresBox.append(totalScore);\r\n\r\n  for (let track of Object.keys(tracks)) {\r\n    let line = document.createElement(\"p\");\r\n    line.className = \"info-line\";\r\n    line.innerHTML = `<span style=\"font-weight:Bold;\"> ${tracks[track]} </span> in ${track} `;\r\n    scoresBox.append(line);\r\n  }\r\n\r\n  let recommendation = document.createElement(\"p\");\r\n  recommendation.className = \"mt-2\";\r\n  if (highestScoredTrack == lowestScoredTrack && highestScoredTrack <= 0) {\r\n    recommendation.innerHTML = `You scored 0 in all tracks questions, try again.`;\r\n  } else if (highestScoredTrack == lowestScoredTrack) {\r\n    recommendation.innerHTML = `You scored equally in all tracks, you're recommended to take the track that aligns with your interests.`;\r\n  } else {\r\n    recommendation.innerHTML = `Recommended to take <span style=\"font-weight:Bold;\"> ${highestScoredTrack} </span>for this course.`;\r\n  }\r\n  scoresBox.append(recommendation);\r\n\r\n  quizBox.hidden = true;\r\n  infoBox.hidden = false;\r\n}\r\n\r\nfunction quizEnd() {\r\n  const date = new Date();\r\n  let day = date.getDate();\r\n  let month = date.getMonth() + 1;\r\n  let year = date.getFullYear();\r\n\r\n  let currentDate = `${day}/${month}/${year}`;\r\n  console.log(currentDate);\r\n\r\n  let userName;\r\n  let elementUserName = document.getElementById(\"userName\");\r\n  if (elementUserName.value.length != 0) {\r\n    userName = elementUserName.value;\r\n  } else {\r\n    userName = \"Anon\";\r\n  }\r\n  console.log(userName);\r\n\r\n  let course = getSelectedCourse().replace(/_/g, \" \");\r\n\r\n  let quizLength = Object.keys(questions).length;\r\n\r\n  let highestScoredTrack = Object.keys(tracks).reduce((a, b) =>\r\n    tracks[a] > tracks[b] ? a : b\r\n  );\r\n\r\n  let totalScore = Object.values(tracks).reduce(\r\n    (partialSum, a) => partialSum + a,\r\n    0\r\n  );\r\n\r\n  push(scoresRef, {\r\n    username: userName,\r\n    date: currentDate,\r\n    course: course,\r\n    quizlength: quizLength,\r\n    totalscore: totalScore,\r\n    tracksscores: tracks,\r\n    recommendation: highestScoredTrack,\r\n  });\r\n}\r\n"],"names":["$fXOuZ","parcelRequire","$13146f66d2c488bd$var$getSelectedCourse","URLSearchParams","window","location","search","get","initializeApp","$icg6M","firebaseConfig","$13146f66d2c488bd$var$db","$8tedJ","getDatabase","$13146f66d2c488bd$var$questionsRef","ref","$13146f66d2c488bd$var$scoresRef","$13146f66d2c488bd$var$elementnumber","document","getElementById","$13146f66d2c488bd$var$elementQuestion","$13146f66d2c488bd$var$elementAButton","addEventListener","$13146f66d2c488bd$var$answerSelected","$13146f66d2c488bd$var$elementBButton","$13146f66d2c488bd$var$elementCButton","$13146f66d2c488bd$var$elementDButton","$13146f66d2c488bd$var$submitButton","createElement","className","date","Date","userName","day","getDate","month","getMonth","year","getFullYear","currentDate","console","log","elementUserName","value","length","course","replace","quizLength","Object","keys","$13146f66d2c488bd$var$questions","highestScoredTrack","$13146f66d2c488bd$var$tracks","reduce","a","b","totalScore","values","partialSum","push","username","quizlength","totalscore","tracksscores","recommendation","href","innerHTML","$13146f66d2c488bd$var$currentQuestionNumber","$13146f66d2c488bd$var$buildQuiz","quizBox","infoBox","scoresBox","append","lowestScoredTrack","total","track","line","hidden","$13146f66d2c488bd$var$displayScore","choices","question","c","d","evt","correctchoice","target","$13146f66d2c488bd$var$updateTrackScores","trackName","isCorrect","$","ready","onValue","snapshot","toJSON"],"version":3,"file":"quiz.81fc78c2.js.map"}